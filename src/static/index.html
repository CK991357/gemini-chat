<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini 2.0 Flash Multimodal Live API Client</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- Âª∫ËÆÆ‰ΩøÁî®Â°´ÂÖÖÁâàÊú¨ÂõæÊ†á -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />
    <!-- Êñ∞Â¢ûÔºöÁî®‰∫éËØ≠Èü≥Êí≠ÊîæÂô®ÂõæÊ†á -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="css/style.css">
    <!-- ÂºïÂÖ• MathJax Áî®‰∫éÊï∞Â≠¶ÂÖ¨ÂºèÊ∏≤Êüì -->
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <!-- ÂºïÂÖ• marked.js Áî®‰∫é Markdown Ê∏≤Êüì -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- ÂºïÂÖ• highlight.js Áî®‰∫é‰ª£Á†ÅÈ´ò‰∫Æ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark-dimmed.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <!-- Êñ∞Â¢ûÔºöÂºïÂÖ• pdf.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script>
        // ËÆæÁΩÆ pdf.js worker ÁöÑË∑ØÂæÑ
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js`;
    </script>
</head>
<body>
    <div id="toast-container"></div>
    <div class="app-container">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <nav class="app-nav">
            <div class="mode-switcher">
                <h1 class="app-title">Gemini Chat</h1>
                <button id="translation-mode-button" class="mode-button material-symbols-outlined">translate</button>
                <button id="chat-mode-button" class="mode-button material-symbols-outlined active">chat</button>
                <button id="vision-mode-button" class="mode-button material-symbols-outlined">camera_enhance</button>
            </div>
            <div class="nav-tools">
                <button id="new-chat-button" class="material-symbols-outlined">add_box</button>
                <button id="toggle-config" class="material-symbols-outlined">settings</button>
                <button id="toggle-log" class="material-symbols-outlined">description</button>
                <button id="theme-toggle" class="material-symbols-outlined">light_mode</button>

            <!-- ÁßªÂä®Â™í‰ΩìÊéßÂà∂ÊåâÈíÆÂà∞ËøôÈáå -->
            <div class="media-controls">
                <button id="mic-button" class="media-button material-symbols-outlined">mic</button>
                <button id="camera-button" class="media-button material-symbols-outlined">videocam</button>
                <button id="screen-button" class="media-button material-symbols-outlined">screen_share</button>
                <!-- ÁßªÈô§ÁøªËΩ¨ÊåâÈíÆ -->
                 </div>
            </div>
        </nav>

        <!-- ‰∏ªÂÆπÂô®ÔºöÂ∑¶Âè≥ÂàÜÊ†è -->
        <div class="main-container">
            <!-- Â∑¶‰æßÊéßÂà∂Èù¢Êùø -->
            <aside class="control-panel">
                <div class="settings-card">
                    <h3>ËÆæÁΩÆ</h3>
                    <div class="setting-item">
                        <label for="api-key">API Key:</label>
                        <input type="password" id="api-key" placeholder="Please Input Gemini API Key" />
                    </div>
                    <div class="setting-item">
                        <label for="voice-select">Â£∞Èü≥:</label>
                        <select id="voice-select">
                            <option value="Puck">Puck (Male)</option>
                            <option value="Charon">Charon (Male)</option>
                            <option value="Fenrir">Fenrir (Male)</option>
                            <option value="Kore">Kore (Female)</option>
                            <option value="Aoede" selected>Aoede (Female)</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="response-type-select">ÂìçÂ∫îÁ±ªÂûã:</label>
                        <select id="response-type-select">
                            <option value="text">Text</option>
                            <option value="audio" selected>Audio</option>
                        </select>
                    </div>
                    <!-- Êñ∞Â¢ûÊ®°ÂûãÈÄâÊã©‰∏ãÊãâËèúÂçï -->
                    <div class="setting-item">
                        <label for="model-select">Ê®°ÂûãÈÄâÊã©:</label>
                        <select id="model-select">
                            <option value="models/gemini-2.0-flash-exp">gemini-2.0-flash-exp</option>
                            <option value="models/gemini-2.5-flash-preview-05-20" selected>gemini-2.5-flash-preview-05-20</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="fps-input">ËßÜÈ¢ë FPS:</label>
                        <input type="number" id="fps-input" placeholder="Video FPS" value="1" min="1" max="30" step="1"/>
                        <span class="fps-help">Êõ¥È´ò FPS ÈúÄË¶ÅÊõ¥Â§öÁΩëÁªúÂ∏¶ÂÆΩ</span>
                    </div>
                    <div class="setting-item full-width">
                        <label for="system-instruction">Á≥ªÁªüÊåá‰ª§:</label>
                        <textarea id="system-instruction" placeholder="Enter custom system instructions..." rows="6"></textarea>
                    </div>
                    <div class="button-group">
                        <button id="apply-config" class="action-button">Á°ÆËÆ§</button>
                        <button id="connect-button" class="action-button primary">ËøûÊé•</button>
                    </div>
                    </div>
            </aside>

            <!-- Âè≥‰æß‰∏ªÂÜÖÂÆπÂå∫ -->
            <div class="content-area">
                <!-- Ê®°ÂºèÂàáÊç¢ÈÄâÈ°πÂç° -->
                <div class="mode-tabs">
                    <button class="tab active" data-mode="text">üìù ÊñáÂ≠óËÅäÂ§©</button>
                    <!-- <button class="tab" data-mode="audio">üéôÔ∏è Èü≥È¢ëËÅäÂ§©</button> Âà†Èô§Ê≠§Ë°å -->
                    <button class="tab" data-mode="log">üìã Á≥ªÁªüÊó•Âøó</button>
                </div>

                <section class="chat-container text-mode active">
                  <div class="media-previews" id="media-previews">
                    <div id="video-container" class="media-preview">
                      <video id="preview" playsinline webkit-playsinline autoplay muted></video>
                      <div class="video-controls">
                        <button id="flip-camera" class="media-button material-symbols-outlined">flip_camera_ios</button>
                        <button id="stop-video" class="close-button material-symbols-outlined">close</button>
                      </div>
                    </div>
                    <div id="screen-preview-container" class="media-preview">
                      <video id="screen-preview-element" playsinline webkit-playsinline autoplay muted></video>
                      <button id="stop-screen-button" class="close-button material-symbols-outlined">close</button>
                    </div>
                  </div>
                  
                  <div class="message-history" id="message-history">
                    <!-- ËÅäÂ§©Ê∂àÊÅØÂä®ÊÄÅÊèíÂÖ• -->
                  </div>

                  <!-- Êñ∞Â¢ûÔºöÊñá‰ª∂ÈôÑ‰ª∂È¢ÑËßàÂÆπÂô® -->
                  <div class="file-attachment-previews" id="file-attachment-previews">
                      <!-- ÈôÑ‰ª∂È¢ÑËßàÂ∞ÜÂä®ÊÄÅÊèíÂÖ•Ê≠§Â§Ñ -->
                  </div>
                  
                  <!-- ËæìÂÖ•Âå∫Âüü‰øùÊåÅ‰∏çÂèò -->

                    <div class="input-area">
                        <textarea id="message-input" placeholder="ËæìÂÖ•Ê∂àÊÅØ..." rows="1"></textarea>
                        <button id="send-button" class="send-button material-symbols-outlined">send</button>
                        <button id="interrupt-button" class="action-button">||</button>
                        <!-- Êñ∞Â¢ûÔºöÈôÑ‰ª∂ÊåâÈíÆ -->
                        <button id="attachment-button" class="action-button material-symbols-outlined">attach_file</button>
                        <!-- Êñ∞Â¢ûÔºöËÅäÂ§©Ê®°Âºè‰∏ãÁöÑËØ≠Èü≥ËæìÂÖ•ÊåâÈíÆ -->
                        <button id="chat-voice-input-button" class="action-button material-symbols-outlined">mic</button>
                        <input type="file" id="file-input" accept="image/jpeg,image/png,image/webp,application/pdf" style="display: none;">
                    </div>
                    
                </section>

                <!-- Á≥ªÁªüÊó•ÂøóÂå∫ (‰øùÊåÅ‰∏çÂèò) -->
                <section class="chat-container log-mode">
                    <div class="log-header">
                        <h3>Á≥ªÁªüÊó•Âøó</h3>
                        <button id="clear-logs" class="action-button">Ê∏ÖÁ©∫</button>
                    </div>
                    <div class="log-content" id="logs-container">
                        <!-- ÂéüÂßãÊó•ÂøóÂÜÖÂÆπÂ∞ÜÂä®ÊÄÅÊèíÂÖ•Ê≠§Â§Ñ -->
                    </div>
                </section>

                <!-- ÁøªËØëÂäüËÉΩÂå∫ -->
                <section class="translation-container">
                    <div class="translation-input-area">
                        <div class="translation-controls">
                            <select id="translation-input-language-select" title="ÈÄâÊã©ËæìÂÖ•ËØ≠Ë®Ä"></select>
                            <select id="translation-model-select" title="ÈÄâÊã©ÁøªËØëÊ®°Âûã">
                                <option value="gemini-2.5-flash-lite-preview-06-17" selected>gemini-2.5-flash-lite-preview-06-17</option>
                                <option value="THUDM/GLM-4-9B-0414">THUDM/GLM-4-9B-0414</option>
                            </select>
                        </div>
                        <textarea id="translation-input-text" placeholder="ËæìÂÖ•Ë¶ÅÁøªËØëÁöÑÂÜÖÂÆπ..." rows="10"></textarea>
                        <div class="translation-action-buttons">
                            <button id="translate-button" class="action-button">ÁøªËØë</button>
                            <!-- Êñ∞Â¢ûÔºöÁøªËØëÊ®°Âºè‰∏ãÁöÑËØ≠Èü≥ËæìÂÖ•ÊåâÈíÆ -->
                            <button id="translation-voice-input-button" class="action-button">ËØ≠Èü≥ËæìÂÖ•</button>
                        </div>
                    </div>
                    <div class="translation-output-area">
                        <div class="translation-controls">
                            <select id="translation-output-language-select" title="ÈÄâÊã©ËæìÂá∫ËØ≠Ë®Ä"></select>
                        </div>
                        <div id="translation-output-text" class="translation-output-display"></div>
                        <button id="translation-copy-button" class="copy-button material-symbols-outlined">content_copy</button>
                    </div>
                </section>

                <!-- ËßÜËßâÊ®°ÂûãÂäüËÉΩÂå∫ -->
                <section class="vision-container">
                  <!-- Ê®°ÂºèÈÄâÊã©Âô®ÔºöÁî®‰∫éÂàáÊç¢ÂõæÂÉèËØÜÂà´ÂíåÊñáÁîüÂõæÊ®°Âºè -->
                  <div class="vision-mode-selector">
                    <button class="vision-mode-btn active" data-mode="analysis">ÂõæÂÉèËØÜÂà´</button>
                    <button class="vision-mode-btn" data-mode="generation">ÊñáÁîüÂõæ</button>
                  </div>

                  <!-- ËæìÂá∫Âå∫ÂüüÔºöÁªü‰∏ÄÁöÑËÅäÂ§©ÂºèÂéÜÂè≤ËÆ∞ÂΩïÔºåÂèØÊòæÁ§∫ÊñáÊú¨ÂíåÂõæÁâá -->
                  <div class="vision-output-area">
                    <div class="vision-output-box">
                      <div id="vision-message-history" class="vision-message-history">
                        <!-- Ê∂àÊÅØÂ∞ÜÂä®ÊÄÅÊ∑ªÂä†ÔºåÂåÖÊã¨ÊñáÊú¨ÂàÜÊûêÁªìÊûúÂíåÁîüÊàêÁöÑÂõæÁâáÁΩëÊ†º -->
                      </div>
                    </div>
                  </div>
                  
                  <!-- ËæìÂÖ•ÂíåÊìç‰ΩúÂå∫Âüü -->
                  <div class="vision-input-area">
                    <!-- ÈôÑ‰ª∂ÊåâÈíÆÔºöÁßªÂä®Âà∞ËæìÂÖ•Ê°ÜÂ∑¶‰æß -->
                    <button id="vision-attachment-button" class="action-button material-symbols-outlined">attach_file</button>
                    
                    <!-- ÊèêÁ§∫ËØçËæìÂÖ•Ê°Ü -->
                    <textarea id="vision-input-text" placeholder="ËæìÂÖ•ÊèèËø∞ÊàñÊèêÁ§∫ËØç..." rows="2"></textarea>
                    
                    <!-- ÂäüËÉΩÊåâÈíÆÔºöÊ†πÊçÆÊ®°ÂºèÊòæÁ§∫ÂØπÂ∫îÁöÑÊåâÈíÆ -->
                    <div class="vision-action-buttons">
                      <button id="vision-analyze-button" class="action-button">ÂàÜÊûê</button>
                      <button id="vision-generate-button" class="action-button" style="display: none;">ÁîüÊàê</button>
                    </div>
                    
                    <!-- ÂèÇÊï∞ËÆæÁΩÆÂå∫ (ÈªòËÆ§ÊäòÂè†ÔºåÊîæÁΩÆÂú®ËæìÂÖ•Âå∫‰∏ãÊñπ) -->
                    <div class="vision-params-collapsible">
                      <div class="param-header">
                        <span>È´òÁ∫ßÂèÇÊï∞ËÆæÁΩÆ</span>
                        <button class="toggle-params material-symbols-outlined">expand_more</button>
                      </div>
                      
                      <div class="params-content">
                        <!-- ÂõæÂÉèËØÜÂà´ÂèÇÊï∞ (ÈªòËÆ§ÊòæÁ§∫) -->
                        <div class="param-group analysis-params">
                          <label for="vision-model-select">ÂàÜÊûêÊ®°Âûã:</label>
                          <select id="vision-model-select"></select>
                        </div>
                        
                        <!-- ÊñáÁîüÂõæÂèÇÊï∞ (ÈªòËÆ§ÈöêËóèÔºåÂàáÊç¢Âà∞ÊñáÁîüÂõæÊ®°ÂºèÊó∂ÊòæÁ§∫) -->
                        <div class="param-group generation-params" style="display: none;">
                          <label for="generation-model-select">ÁîüÊàêÊ®°Âûã:</label>
                          <select id="generation-model-select"></select>
                          
                          <label for="image-size">ÂõæÁâáÂ∞∫ÂØ∏:</label>
                          <select id="image-size">
                            <option value="1024x1024">1024x1024</option>
                            <option value="960x1280">960x1280</option>
                            <option value="768x1024">768x1024</option>
                            <option value="720x1440">720x1440</option>
                            <option value="720x1280">720x1280</option>
                            <!-- ÂÖ∂‰ªñÂ∞∫ÂØ∏ÈÄâÈ°πÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÊ∑ªÂä† -->
                          </select>
                          
                          <label for="batch-size">ÁîüÊàêÊï∞Èáè:</label>
                          <input type="number" id="batch-size" min="1" max="4" value="1">
                          
                          <label for="steps">Ëø≠‰ª£Ê≠•Êï∞:</label>
                          <input type="number" id="steps" min="1" max="100" value="20">

                          <label for="guidance-scale">ÂºïÂØºÁ≥ªÊï∞:</label>
                          <input type="number" id="guidance-scale" min="0" max="20" step="0.1" value="7.5">

                          <label for="negative-prompt">Ë¥üÈù¢ÊèêÁ§∫ËØç:</label>
                          <textarea id="negative-prompt" rows="2" placeholder="ËæìÂÖ•Ë¥üÈù¢ÊèêÁ§∫ËØç..."></textarea>

                          <label for="seed">ÁßçÂ≠ê:</label>
                          <input type="number" id="seed" min="0" max="9999999999" placeholder="ÂèØÈÄâÔºåÁïôÁ©∫ÈöèÊú∫">
                        </div>
                      </div>
                    </div>
                  </div>
                </section>

            </div>
        </div>

    </div>
    <script src="js/main.js" type="module"></script>
</body>
</html>
